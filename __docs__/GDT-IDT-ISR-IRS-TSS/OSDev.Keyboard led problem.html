<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

<title>OSDev.org &bull; View topic - Keyboard led problem</title>

<link rel="alternate" type="application/atom+xml" title="Feed - OSDev.org" href="http://forum.osdev.org/feed.php" /><link rel="alternate" type="application/atom+xml" title="Feed - News" href="http://forum.osdev.org/feed.php?mode=news" /><link rel="alternate" type="application/atom+xml" title="Feed - All forums" href="http://forum.osdev.org/feed.php?mode=forums" /><link rel="alternate" type="application/atom+xml" title="Feed - New Topics" href="http://forum.osdev.org/feed.php?mode=topics" /><link rel="alternate" type="application/atom+xml" title="Feed - Active Topics" href="http://forum.osdev.org/feed.php?mode=topics_active" /><link rel="alternate" type="application/atom+xml" title="Feed - Forum - OS Development" href="http://forum.osdev.org/feed.php?f=1" /><link rel="alternate" type="application/atom+xml" title="Feed - Topic - Keyboard led problem" href="http://forum.osdev.org/feed.php?f=1&amp;t=10354" />

<link rel="stylesheet" href="./styles/subsilver2/theme/stylesheet.css" type="text/css" />

<script type="text/javascript">
// <![CDATA[


function popup(url, width, height, name)
{
	if (!name)
	{
		name = '_popup';
	}

	window.open(url.replace(/&amp;/g, '&'), name, 'height=' + height + ',resizable=yes,scrollbars=yes,width=' + width);
	return false;
}

function jumpto()
{
	var page = prompt('Enter the page number you wish to go to:', '1');
	var per_page = '15';
	var base_url = './viewtopic.php?f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb';

	if (page !== null && !isNaN(page) && page == Math.floor(page) && page > 0)
	{
		if (base_url.indexOf('?') == -1)
		{
			document.location.href = base_url + '?start=' + ((page - 1) * per_page);
		}
		else
		{
			document.location.href = base_url.replace(/&amp;/g, '&') + '&start=' + ((page - 1) * per_page);
		}
	}
}

/**
* Find a member
*/
function find_username(url)
{
	popup(url, 760, 570, '_usersearch');
	return false;
}

/**
* Mark/unmark checklist
* id = ID of parent container, name = name prefix, state = state [true/false]
*/
function marklist(id, name, state)
{
	var parent = document.getElementById(id);
	if (!parent)
	{
		eval('parent = document.' + id);
	}

	if (!parent)
	{
		return;
	}

	var rb = parent.getElementsByTagName('input');
	
	for (var r = 0; r < rb.length; r++)
	{
		if (rb[r].name.substr(0, name.length) == name)
		{
			rb[r].checked = state;
		}
	}
}



// ]]>
</script>
</head>
<body class="ltr">

<a name="top"></a>

<div id="wrapheader">

	<div id="logodesc">
		<table width="100%" cellspacing="0">
		<tr>
			<td><a href="./index.php?sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/osdev.png" width="120" height="100" alt="" title="" /></a></td>
			<td width="100%" align="center"><h1>OSDev.org</h1><span class="gen">The Place to Start for Operating System Developers</span></td>
		</tr>
		</table>
	</div>

	<div id="menubar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="genmed">
				<a href="./ucp.php?mode=login&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/theme/images/icon_mini_login.gif" width="12" height="13" alt="*" /> Login</a>&nbsp; &nbsp;<a href="./ucp.php?mode=register&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/theme/images/icon_mini_register.gif" width="12" height="13" alt="*" /> Register</a>
					
			</td>
			<td class="genmed" align="right">
<a href="http://wiki.osdev.org/" style="font-size: 125%; font-weight: bold;">The OSDev.org Wiki - Got a question? Search this first!</a>
				<a href="./faq.php?sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/theme/images/icon_mini_faq.gif" width="12" height="13" alt="*" /> FAQ</a>
				&nbsp; &nbsp;<a href="./search.php?sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/theme/images/icon_mini_search.gif" width="12" height="13" alt="*" /> Search</a>
			</td>
		</tr>
		</table>
	</div>

	<div id="datebar">
		<table width="100%" cellspacing="0">
		<tr>
			<td class="gensmall"></td>
			<td class="gensmall" align="right">It is currently Mon Sep 26, 2016 5:17 am<br /></td>
		</tr>
		</table>
	</div>

</div>

<div id="wrapcentre">

	
	<p class="searchbar">
		<span style="float: left;"><a href="./search.php?search_id=unanswered&amp;sid=8b6c1bbcb793baafd768082606af3ccb">View unanswered posts</a> | <a href="./search.php?search_id=active_topics&amp;sid=8b6c1bbcb793baafd768082606af3ccb">View active topics</a></span>
		
	</p>
	

	<br style="clear: both;" />

	<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=8b6c1bbcb793baafd768082606af3ccb">Board index</a> &#187; <a href="./viewforum.php?f=16&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Operating System Development</a> &#187; <a href="./viewforum.php?f=1&amp;sid=8b6c1bbcb793baafd768082606af3ccb">OS Development</a></p>
			<p class="datetime">All times are UTC - 6 hours </p>
		</td>
	</tr>
	</table>

	<br />

<div id="pageheader">
	<h2><a class="titles" href="./viewtopic.php?f=1&amp;t=10354&amp;start=0&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Keyboard led problem</a></h2>


	<p class="moderators">Moderators: <a href="./memberlist.php?mode=viewprofile&amp;u=3016&amp;sid=8b6c1bbcb793baafd768082606af3ccb">mystran</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=67&amp;sid=8b6c1bbcb793baafd768082606af3ccb">JAAman</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=4866&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Owen</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=1906&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Combuster</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=1922&amp;sid=8b6c1bbcb793baafd768082606af3ccb">quok</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=2600&amp;sid=8b6c1bbcb793baafd768082606af3ccb">os64dev</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=1902&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Candy</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=2&amp;sid=8b6c1bbcb793baafd768082606af3ccb">chase</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=2477&amp;sid=8b6c1bbcb793baafd768082606af3ccb">pcmattman</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=12891&amp;sid=8b6c1bbcb793baafd768082606af3ccb">sortie</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=1950&amp;sid=8b6c1bbcb793baafd768082606af3ccb">AJ</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=356&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Brendan</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=3731&amp;sid=8b6c1bbcb793baafd768082606af3ccb">01000101</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=155&amp;sid=8b6c1bbcb793baafd768082606af3ccb">carbonBased</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=13448&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Antti</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=4287&amp;sid=8b6c1bbcb793baafd768082606af3ccb">thepowersgang</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=3781&amp;sid=8b6c1bbcb793baafd768082606af3ccb">JamesM</a>, <a href="./memberlist.php?mode=viewprofile&amp;u=117&amp;sid=8b6c1bbcb793baafd768082606af3ccb">kmcguire</a></p>

</div>

<br clear="all" /><br />

<div id="pagecontent">

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=1&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 16 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat">
			<table width="100%" cellspacing="0">
			<tr>
				<td class="nav" nowrap="nowrap">&nbsp;
				<a href="./viewtopic.php?f=1&amp;t=10354&amp;start=0&amp;sid=8b6c1bbcb793baafd768082606af3ccb&amp;view=print" title="Print view">Print view</a>
				</td>
				<td class="nav" align="right" nowrap="nowrap"><a href="./viewtopic.php?f=1&amp;t=10354&amp;view=previous&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Previous topic</a> | <a href="./viewtopic.php?f=1&amp;t=10354&amp;view=next&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Next topic</a>&nbsp;</td>
			</tr>
			</table>
		</td>
	</tr>

	</table>


	<table class="tablebg" width="100%" cellspacing="1">
	
		<tr>
			<th>Author</th>
			<th>Message</th>
		</tr>
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67379"></a>
				<b class="postauthor">espenfjo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67379&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67379"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 12:58 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I`ve been trying to write a keyboard led function. I think i got it all right, but dont seem to work, atleast not in qemu/bochs/vmware.<br />This is the code:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if&#40;scancode == 69&#41; /* Numlock */<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while&#40;inportb&#40;0x64&#41; &amp; 0x2&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outportb&#40;0x60, 0xed&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; outportb&#40;0x60, 1&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#125;<br /><br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67380"></a>
				<b class="postauthor">pini</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67380&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67380"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 2:01 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">I would replace your last outportb by :<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">outportb&#40;0x60, 2&#41;;</div><br /><br />If I remember good, NUM is 2, CAPS is 4 and SCROLL is 0.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67381"></a>
				<b class="postauthor">espenfjo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67381&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67381"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 2:14 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Yeah, thats correct, but &#039;1&#039; should, as far as i know, turn all lights off.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67382"></a>
				<b class="postauthor">pini</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67382&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67382"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 2:56 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">According to my book (PC Bible, 2nd edition 1989 <img src="./images/smilies/icon_razz.gif" alt=":P" title="Razz" />) :<br /><br />bit 0 is Scroll lock<br />bit 1 is Num lock<br />bit 2 is Caps lock<br /><br />The light is on when the corresponding bit is set, so setting &#039;1&#039; will light SCROLL on and turning all lights on is done with &#039;7&#039;.<br />Num alone is set with &#039;2&#039; and Caps alone with &#039;4&#039;</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67383"></a>
				<b class="postauthor">espenfjo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67383&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67383"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 3:02 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, i&#039;ve tried nearly all the combinations, but no changes what so ever. :\</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67384"></a>
				<b class="postauthor">B.E</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67384&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67384"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Mon Mar 28, 2005 5:54 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Try reading the state and the oring the bit<br /><br />I am not quite show on this but don&#039;t you have to wait before you send the next byte after you send the set LED command<br /><br />Which light come on when you press this button</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67385"></a>
				<b class="postauthor">pini</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67385&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67385"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2005 12:15 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="quotetitle">B.E wrote:</div><div class="quotecontent">I am not quite show on this but don&#039;t you have to wait before you send the next byte after you send the set LED command<br /></div><br /><br />Right, and one could also check he receives an ACK (0xFA) after sending both bytes.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67386"></a>
				<b class="postauthor">bubach</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67386&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67386"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2005 1:32 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td><img src="./styles/subsilver2/imageset/en/icon_user_offline.gif" alt="Offline" title="Offline" /></td>
				</tr>
			
				<tr>
					<td class="postdetails">Member</td>
				</tr>
			
				<tr>
					<td><img src="./images/ranks/5.gif" alt="Member" title="Member" /></td>
				</tr>
			
				<tr>
					<td><img src="./download/file.php?avatar=35_1328026145.jpg" width="60" height="60" alt="User avatar" /></td>
				</tr>
			
				</table>

				<span class="postdetails">
					<br /><b>Joined:</b> Sat Oct 23, 2004 11:00 pm<br /><b>Posts:</b> 1220<br /><b>Location:</b> Sweden
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Have you had a look here:<br /><a href="http://www.mega-tokyo.com/forum/index.php?board=1;action=display;threadid=7182" class="postlink">http://www.mega-tokyo.com/forum/index.php?board=1;action=display;threadid=7182</a><br /><a href="http://www.mega-tokyo.com/forum/index.php?board=1;action=display;threadid=7009" class="postlink">http://www.mega-tokyo.com/forum/index.php?board=1;action=display;threadid=7009</a><br />?</div>

					
						<span class="postbody"><br />_________________<br />&quot;Simplicity is the ultimate sophistication.&quot;<br /><a href="http://bos.asmhackers.net/" class="postlink">http://bos.asmhackers.net/</a> - <a href="https://github.com/bubach/BOS" class="postlink">GitHub</a></span>
					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;<a href="./memberlist.php?mode=viewprofile&amp;u=35&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/en/icon_user_profile.gif" alt="Profile" title="Profile" /></a> &nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67387"></a>
				<b class="postauthor">Poseidon</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67387&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67387"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Tue Mar 29, 2005 8:53 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody"><div class="codetitle"><b>Code:</b></div><div class="codecontent">#define scrollock&nbsp;&nbsp;&nbsp;&#40;unsigned char&#41; 0x01<br />#define numlock &nbsp;&nbsp;&nbsp;&#40;unsigned char&#41; 0x02<br />#define capslock&nbsp;&nbsp;&nbsp;&#40;unsigned char&#41; 0x04<br /><br />void kbd_updateleds&#40;unsigned char led&#41; &#123;<br />&nbsp;&nbsp;&nbsp;if&#40;led == 0&#41; &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leds = 0;<br />&nbsp;&nbsp;&nbsp;&#125; else &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if &#40;leds == &#40;leds | led&#41;&#41; &#123;&nbsp;&nbsp;&nbsp;//If led is already on<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leds = leds ^ led;&nbsp;&nbsp;&nbsp;// turn led off<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125; else &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leds = leds | led;&nbsp;&nbsp;&nbsp;// else turn led on<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;<br />&nbsp;&nbsp;&nbsp;&#125;<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;kbd_senddata&#40;0xED&#41;;<br />&nbsp;&nbsp;&nbsp;kbd_senddata&#40;leds&#41;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//update led status<br />&#125;<br /></div><br /><br />My code for switching LEDs, maybe it helps you.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67388"></a>
				<b class="postauthor">espenfjo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67388&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67388"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 30, 2005 8:28 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">It&#039;s still not working, so i&#039;m beginning to wonder if the problem could be Linux or maybe qemu/bochs/vmware</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67389"></a>
				<b class="postauthor">pini</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67389&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67389"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 30, 2005 11:45 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">You will probably not be able to switch on/off leds when using a emulator.<br />Try to make a &quot;real&quot; test to check if it works.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67390"></a>
				<b class="postauthor">B.E</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67390&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67390"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Wed Mar 30, 2005 4:37 pm&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Go to the following website and download the Ebook:<br />[link]http://webster.cs.ucr.edu/AoA/Windows/index.html[/link]<br /><br />Goto chaptor 20. This will give you a full in depth tutorial on how to program the keyboard.</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67391"></a>
				<b class="postauthor">aladdin</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67391&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67391"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 31, 2005 4:52 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">here is the part of code of my keyboard driver to switch on/of keyboard leds, it works on all emulators and real machines<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">...<br />static char kbdstatus = 0;<br />static short caps=0;&nbsp; &nbsp;//variable to acces caps lock status<br />static short num=0;&nbsp; &nbsp;//variable to access num lock status<br />...<br /><br />void kbd_led&#40;char status&#41;<br />&#123;<br />&nbsp; &nbsp;int st;<br /><br />&nbsp; &nbsp;do &#123;<br />&nbsp; &nbsp; &nbsp; st = inb&#40;0x64&#41;;<br />&nbsp; &nbsp;&#125; while &#40;st&amp;0x02&#41;;<br /><br />&nbsp; &nbsp;outb&#40;0x60, 0x0ed&#41;;<br />&nbsp; &nbsp;do &#123;<br />&nbsp; &nbsp; &nbsp; st = inb&#40;0x64&#41;;<br />&nbsp; &nbsp;&#125; while &#40;st&amp;0x02&#41;;<br /><br />&nbsp; &nbsp;outb&#40;0x60, status&amp;0x07&#41;;<br /><br />&#125;<br /><br />void switch_num_lock&#40;&#41;<br />&#123;<br />&nbsp; &nbsp;if &#40;num&#41; num=0; else num=1; //is numlock on or off ?<br /><br />&nbsp; &nbsp;if&#40;!&#40;kbdstatus&amp;NUM_LOCK&#41;&#41;&nbsp; <br />&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp; &nbsp; kbdstatus |= NUM_LOCK;<br />&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;else&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; kbdstatus &amp;= &#40;CAPS_LOCK|SCROLL_LOCK&#41;;<br /><br /><br />&nbsp; &nbsp;kbd_led&#40;kbdstatus&#41;;&nbsp; &nbsp;<br />&#125;<br /><br /><br />void switch_caps_lock&#40;&#41;<br />&#123;<br />&nbsp; &nbsp;if &#40;caps&#41; caps=0; else caps=1;<br />&nbsp; &nbsp;if&#40;!&#40;kbdstatus&amp;CAPS_LOCK&#41;&#41; <br />&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp; &nbsp; kbdstatus |= CAPS_LOCK;<br />&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;else&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; kbdstatus &amp;= &#40;NUM_LOCK|SCROLL_LOCK&#41;;<br /><br /><br />&nbsp; &nbsp;kbd_led&#40;kbdstatus&#41;;&nbsp; &nbsp;<br />&#125;<br /><br />void switch_scroll_lock&#40;&#41;<br />&#123;<br /><br />&nbsp; &nbsp;if&#40;!&#40;kbdstatus&amp;SCROLL_LOCK&#41;&#41; <br />&nbsp; &nbsp;&#123;<br />&nbsp; &nbsp; &nbsp; kbdstatus |= SCROLL_LOCK;<br />&nbsp; &nbsp;&#125;<br />&nbsp; &nbsp;else&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; kbdstatus &amp;= &#40;NUM_LOCK|CAPS_LOCK&#41;;<br /><br /><br />&nbsp; &nbsp;kbd_led&#40;kbdstatus&#41;;&nbsp; &nbsp;<br />&#125;<br /><br /></div></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row2">

			<td align="center" valign="middle">
				<a name="p67392"></a>
				<b class="postauthor">espenfjo</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67392&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67392"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 31, 2005 9:05 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">Ok, it think i got it to work, it seems to work in vmware atleast. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row2">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table class="tablebg" width="100%" cellspacing="1">
	<tr class="row1">

			<td align="center" valign="middle">
				<a name="p67393"></a>
				<b class="postauthor">proxy</b>
			</td>
			<td width="100%" height="25">
				<table width="100%" cellspacing="0">
				<tr>
				
					<td class="gensmall" width="100%"><div style="float: left;">&nbsp;<b>Post subject:</b> Re:Keyboard led problem</div><div style="float: right;"><a href="./viewtopic.php?p=67393&amp;sid=8b6c1bbcb793baafd768082606af3ccb#p67393"><img src="./styles/subsilver2/imageset/icon_post_target.gif" width="12" height="9" alt="Post" title="Post" /></a><b>Posted:</b> Thu Mar 31, 2005 9:32 am&nbsp;</div></td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td valign="top" class="profile">
				<table cellspacing="4" align="center" width="150">
			
				<tr>
					<td></td>
				</tr>
			
				</table>

				<span class="postdetails">
					
				</span>

			</td>
			<td valign="top">
				<table width="100%" cellspacing="5">
				<tr>
					<td>
					

						<div class="postbody">this is more for aladdin, just wanted to let you know that your code could be MUCH simpler.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void switch_num_lock&#40;&#41;<br />&#123;<br />&nbsp; if &#40;num&#41; num=0; else num=1; //is numlock on or off ?<br /><br />&nbsp; if&#40;!&#40;kbdstatus&amp;NUM_LOCK&#41;&#41; <br />&nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; kbdstatus |= NUM_LOCK;<br />&nbsp; &#125;<br />&nbsp; else&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; kbdstatus &amp;= &#40;CAPS_LOCK|SCROLL_LOCK&#41;;<br /><br /><br />&nbsp; kbd_led&#40;kbdstatus&#41;; <br />&#125;<br /></div><br /><br />coudl easily be written like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void switch_num_lock&#40;&#41;<br />&#123;<br />&nbsp; if &#40;num&#41; num=0; else num=1; //is numlock on or off ?<br /><br />&nbsp; if&#40;!&#40;kbdstatus&amp;NUM_LOCK&#41;&#41; <br />&nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; kbdstatus |= NUM_LOCK;<br />&nbsp; &#125;<br />&nbsp; else&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; kbdstatus &amp;= &#40;~NUM_LOCK&#41;;<br /><br /><br />&nbsp; kbd_led&#40;kbdstatus&#41;; <br />&#125;<br /></div><br /><br />which could lead to a generic function doing thr real work and your &quot;flip_whatever fuction just calling that with the right flag passed..but it get&#039;s better.  XOR will flip bits just like you want so...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void switch_num_lock&#40;&#41;<br />&#123;<br />&nbsp; if &#40;num&#41; num=0; else num=1; //is numlock on or off ?<br /><br />&nbsp; kbdstatus ^= NUM_LOCK;<br /><br />&nbsp; kbd_led&#40;kbdstatus&#41;; <br />&#125;<br /></div><br /><br />finally, what&#039;s with the conditional logic to invert a boolean?!<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void switch_num_lock&#40;&#41;<br />&#123;<br />&nbsp; num = !num; //is numlock on or off ?<br />&nbsp; kbdstatus ^= NUM_LOCK;<br />&nbsp; kbd_led&#40;kbdstatus&#41;; <br />&#125;<br /></div><br /><br />as you can see your solution is far more complicated than neccessary.<br /><br />proxy</div>

					<br clear="all" /><br />

						<table width="100%" cellspacing="0">
						<tr valign="middle">
							<td class="gensmall" align="right">
							
							</td>
						</tr>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>

		<tr class="row1">

			<td class="profile"><strong><a href="#wrapheader">Top</a></strong></td>
			<td><div class="gensmall" style="float: left;">&nbsp;&nbsp;</div> <div class="gensmall" style="float: right;">&nbsp;</div></td>
	
		</tr>

	<tr>
		<td class="spacer" colspan="2" height="1"><img src="images/spacer.gif" alt="" width="1" height="1" /></td>
	</tr>
	</table>

	<table width="100%" cellspacing="1" class="tablebg">
	<tr align="center">
		<td class="cat"><form name="viewtopic" method="post" action="./viewtopic.php?f=1&amp;t=10354&amp;start=0&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><span class="gensmall">Display posts from previous:</span> <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select>&nbsp;<span class="gensmall">Sort by</span> <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select> <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select>&nbsp;<input class="btnlite" type="submit" value="Go" name="sort" /></form></td>
	</tr>
	</table>
	

	<table width="100%" cellspacing="1">
	<tr>
		<td align="left" valign="middle" nowrap="nowrap">
		<a href="./posting.php?mode=post&amp;f=1&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/en/button_topic_new.gif" alt="Post new topic" title="Post new topic" /></a>&nbsp;<a href="./posting.php?mode=reply&amp;f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><img src="./styles/subsilver2/imageset/en/button_topic_reply.gif" alt="Reply to topic" title="Reply to topic" /></a>
		</td>
		
			<td class="nav" valign="middle" nowrap="nowrap">&nbsp;Page <strong>1</strong> of <strong>2</strong><br /></td>
			<td class="gensmall" nowrap="nowrap">&nbsp;[ 16 posts ]&nbsp;</td>
			<td class="gensmall" width="100%" align="right" nowrap="nowrap"><b><a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Go to page</a> <strong>1</strong><span class="page-sep">, </span><a href="./viewtopic.php?f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb&amp;start=15">2</a> &nbsp;<a href="./viewtopic.php?f=1&amp;t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb&amp;start=15">Next</a></b></td>
		
	</tr>
	</table>

</div>

<div id="pagefooter"></div>

<br clear="all" />
<table class="tablebg" width="100%" cellspacing="1" cellpadding="0" style="margin-top: 5px;">
	<tr>
		<td class="row1">
			<p class="breadcrumbs"><a href="./index.php?sid=8b6c1bbcb793baafd768082606af3ccb">Board index</a> &#187; <a href="./viewforum.php?f=16&amp;sid=8b6c1bbcb793baafd768082606af3ccb">Operating System Development</a> &#187; <a href="./viewforum.php?f=1&amp;sid=8b6c1bbcb793baafd768082606af3ccb">OS Development</a></p>
			<p class="datetime">All times are UTC - 6 hours </p>
		</td>
	</tr>
	</table>
	<br clear="all" />

	<table class="tablebg" width="100%" cellspacing="1">
	<tr>
		<td class="cat"><h4>Who is online</h4></td>
	</tr>
	<tr>
		<td class="row1"><p class="gensmall">Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span>, <a href="./memberlist.php?mode=viewprofile&amp;u=16515&amp;sid=8b6c1bbcb793baafd768082606af3ccb">dennis95</a>, <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span> and 5 guests</p></td>
	</tr>
	</table>


<br clear="all" />

<table width="100%" cellspacing="1">
<tr>
	<td width="40%" valign="top" nowrap="nowrap" align="left"></td>
	<td align="right" valign="top" nowrap="nowrap"><span class="gensmall">You <strong>cannot</strong> post new topics in this forum<br />You <strong>cannot</strong> reply to topics in this forum<br />You <strong>cannot</strong> edit your posts in this forum<br />You <strong>cannot</strong> delete your posts in this forum<br />You <strong>cannot</strong> post attachments in this forum<br /></span></td>
</tr>
</table>

<br clear="all" />

<table width="100%" cellspacing="0">
<tr>
	<td><form method="post" name="search" action="./search.php?t=10354&amp;sid=8b6c1bbcb793baafd768082606af3ccb"><span class="gensmall">Search for:</span> <input class="post" type="text" name="keywords" size="20" /> <input class="btnlite" type="submit" value="Go" /></form></td>
	<td align="right">
	<form method="post" name="jumpbox" action="./viewforum.php?sid=8b6c1bbcb793baafd768082606af3ccb" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	<table cellspacing="0" cellpadding="0" border="0">
	<tr>
		<td nowrap="nowrap"><span class="gensmall">Jump to:</span>&nbsp;<select name="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">

		
			<option value="-1">Select a forum</option>
		<option value="-1">------------------</option>
			<option value="16">Operating System Development</option>
		
			<option value="1" selected="selected">&nbsp; &nbsp;OS Development</option>
		
			<option value="15">&nbsp; &nbsp;OS Design &amp; Theory</option>
		
			<option value="2">&nbsp; &nbsp;Announcements, Test Requests, &amp; Job openings</option>
		
			<option value="17">Everything Else</option>
		
			<option value="13">&nbsp; &nbsp;General Programming</option>
		
			<option value="11">&nbsp; &nbsp;General Ramblings</option>
		
			<option value="7">&nbsp; &nbsp;Auto-Delete Forum</option>
		
			<option value="18">OSDev.org</option>
		
			<option value="8">&nbsp; &nbsp;OSDev Wiki</option>
		
			<option value="6">&nbsp; &nbsp;About this site</option>
		

		</select>&nbsp;<input class="btnlite" type="submit" value="Go" /></td>
	</tr>
	</table>

	</form>
</td>
</tr>
</table>


</div>

<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

<div id="wrapfooter">
	
	<span class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> &copy; 2000, 2002, 2005, 2007 phpBB Group
	</span>
</div>

</body>
</html>